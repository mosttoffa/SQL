## GROUP BY 

тЬЕ <B>GROUP BY </B> <BR> 
 * GROUP BY Clause- groups records into Summary rows.
 * GROUP BY returns one record for each group.
 * GROUP BY is used with aggregrates: COUNT, MAX, SUM, AVG etc.
 * GROUP BY uses after WHERE Clause, Inside GROUP BY can't use WHERE, HAVING use after GROUP BY. 
<BR>

тЬЕ GROUP BY ржПрж░ рж╕рж╛ржерзЗ ржпрзЗржЧрзБрж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ: 
 * Aggregate Functions	:  SUM(), COUNT(), AVG(), MIN(), MAX() ржЗрждрзНржпрж╛ржжрж┐ тАФ Group-ржПрж░ summary ржмрзЗрж░ ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯ
 * HAVING	: Aggregate result filter ржХрж░рж╛рж░ ржЬржирзНржп
 * ORDER BY	 : Final result sort ржХрж░рж╛рж░ ржЬржирзНржп
 * WHERE	: Group ржХрж░рж╛рж░ ржЖржЧрзЗрж░ raw data filter ржХрж░рж╛рж░ ржЬржирзНржп
 * JOIN	: ржПржХрж╛ржзрж┐ржХ ржЯрзЗржмрж┐рж▓рзЗрж░ ржбрзЗржЯрж╛ ржПржХрж╕рж╛ржерзЗ group ржХрж░рждрзЗ
 * CASE WHEN	: Conditional grouping ржмрж╛ calculation ржХрж░рж╛рж░ ржЬржирзНржп
 * CTE / Subquery	: Complex group logic manage ржХрж░рж╛рж░ ржЬржирзНржп
 * SUBQUERY

ЁЯФ╖ <B>GROUP BY with COUNT </B> <BR> 
ЁЯСЙ Example: List the number of customers in each country.  
<PRE>SELECT Country, COUNT(Id) 'Total Customers'
		FROM Customer
		GROUP BY Country   </PRE>		 
ЁЯФ╖ <B>GROUP BY with COUNT, ORDER BY </B>  <BR> 
ЁЯСЙ Example: List the number of customers in each country, sorted high to low. 
<PRE>SELECT Country, COUNT(Id) 'Total Customers' 
	FROM Customer
	GROUP BY Country
	ORDER BY COUNT(Id) DESC    </PRE>		 
ЁЯФ╖ <B> GROUP BY with SUM, ORDER BY </B>  <BR> 
ЁЯСЙ Example:  List the total order amount for each customer, sorted high to low. 
<PRE>SELECT C.FirstName, C.LastName, SUM(O.TotalAmount) 'Total Price'
	FROM [Order] O 
	INNER JOIN Customer C ON O.CustomerId = C.Id
	GROUP BY C.FirstName, C.LastName
	ORDER BY SUM(O.TotalAmount) DESC     </PRE>	

ЁЯФ╖ <b>GROUP BY-рждрзЗ рж╢рзБржзрзБ column ржирзЯ, expression (calculated field) ржжрж┐рзЯрзЗржУ group ржХрж░рж╛ ржпрж╛рзЯред </b> <br>
ЁЯСЙ Useful when you want grouping by derived data like year, month, category range etc
<pre>SELECT YEAR(OrderDate) AS OrderYear, SUM(TotalAmount) AS Total
	FROM Orders
	GROUP BY YEAR(OrderDate); </pre>	 

ЁЯФ╖ <b>GROUP BY with CASE WHEN </b>  <br> 
ЁЯСЙ ржПржХржЗ CASE expression SELECT ржП ржПржмржВ GROUP BY рждрзЗржУ ржжрж┐рждрзЗ рж╣рзЯред

<pre>SELECT 
    CASE 
        WHEN TotalAmount >= 1000 THEN 'High Value'
        ELSE 'Regular'
    END AS OrderType,
    COUNT(*) AS TotalOrders
FROM Orders
GROUP BY 
    CASE 
        WHEN TotalAmount >= 1000 THEN 'High Value'
        ELSE 'Regular'
    END;    </pre> 
ЁЯФ╖ <b> GROUP BY Multiple Columns </b> <br> 
ЁЯСЙ Multiple column ржП group ржХрж░рж▓рзЗ SQL ржкрзНрж░рждрж┐ржЯрж┐ unique combination-ржПрж░ ржЬржирзНржп summary рждрзИрж░рж┐ ржХрж░рзЗред
<pre>SELECT Country, City, COUNT(Id) AS TotalCustomers
FROM Customer
GROUP BY Country, City; </pre>
ЁЯФ╖ <b>GROUP BY with ROLLUP / CUBE / GROUPING SETS </b>  <br> 
ЁЯСЙ ржПржЧрзБрж▓рзЛ advanced summary reports рждрзИрж░рж┐ ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯ тАФ ржпрзЗржоржи Subtotal / Grand Total рж╣рж┐рж╕рж╛ржм
<pre>SELECT Country, City, SUM(Sales) AS TotalSales
FROM Orders
GROUP BY ROLLUP (Country, City);  </pre>
> ROLLUP тЖТ Hierarchical summary,
> CUBE тЖТ All combinations summary, 
> GROUPING SETS тЖТ Custom summary control
<br>ЁЯФ╖ <b>GROUP BY in Subquery</b>  <br> 
ЁЯСЙ Often used to pre-aggregate data before joining
<pre>SELECT C.CustomerName, T.TotalAmount
FROM Customer C
JOIN (
    SELECT CustomerId, SUM(TotalAmount) AS TotalAmount
    FROM Orders
    GROUP BY CustomerId
) AS T ON C.Id = T.CustomerId;  -- Common pattern in analytics or dashboard queries.</pre>
 
ЁЯФ╖ <b> GROUP BY with HAVING & WHERE тАФ Proper Order </b> <br> 
<pre> 
 Clause		| Purpose					| Runs When 
-----------------------------------------------------------	
 WHERE	 	| Row-level filtering		| Before grouping
 GROUP BY	| Group creation			| After WHERE
 HAVING		| Filter on grouped results	| After GROUP BY
 ORDER BY	| Sort final results		| Last
</pre>
тЪая╕П <b>HAVING ржЫрж╛ржбрж╝рж╛ aggregate filter ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ред </b>  <br> 
ЁЯСЙ Example : 
<pre>HAVING SUM(Sales) > 10000 </pre>  

ЁЯФ╖ <b>GROUP BY and NULL Handling </b> 
 * SQL treats all NULL values as one group.
 * ржЕрж░рзНржерж╛рзО, GROUP BY Country ржХрж░рж▓рзЗ Country = NULL-ржПрж░ рж╕ржм record ржПржХржЗ group ржП ржзрж░рж╛ рж╣ржмрзЗред
 * ржкрзНрж░ржпрж╝рзЛржЬржирзЗ COALESCE() ржжрж┐ржпрж╝рзЗ default value рж╕рзЗржЯ ржХрж░рзЛ:
<pre>SELECT COALESCE(Country, 'Unknown') AS Country, COUNT(*) FROM Customer GROUP BY COALESCE(Country, 'Unknown');</pre>

ЁЯФ╖ <b>GROUP BY vs DISTINCT</b> 
















	
