## HAVING
тЬЕ <B>HAVING </b> <BR>  HAVING is like WHERE but operates on grouped records. HAVING requires that a GROUP BY clause is present. Groups that meet the HAVING criteria will be returned. HAVING is used with aggregrates: COUNT, MAX, SUM, etc. <br> 
HAVING clause рж╕рж╛ржзрж╛рж░ржгржд GROUP BY ржЫрж╛рзЬрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛, ржХрж╛рж░ржг ржПрж░ ржорзВрж▓ ржХрж╛ржЬ рж╣рж▓рзЛ group ржХрж░рж╛ data-рж░ ржЙржкрж░ filtering ржХрж░рж╛ тАФ ржЕрж░рзНржерж╛рзО aggregate result (ржпрзЗржоржи: SUM(), COUNT(), AVG() ржЗрждрзНржпрж╛ржжрж┐)-ржПрж░ ржнрж┐рждрзНрждрж┐рждрзЗ filter ржХрж░рж╛ред 
рждржмрзЗ ржХрж┐ржЫрзБ ржХрзНрж╖рзЗрждрзНрж░рзЗ, HAVING GROUP BY ржЫрж╛рзЬрж╛ use ржХрж░рж╛ technically possible, ржХрж┐ржирзНрждрзБ рж╕рзЗржЯрж╛ рждржЦржиржЗ рж╕ржорзНржнржм ржпржЦржи query рждрзЗ aggregate function ржерж╛ржХрзЗред <br> 

ЁЯФ╖ <b>HAVING vs WHERE тАФ Clear Difference </b> 
<pre>
	ржмрж┐рж╖рзЯ				| WHERE								| HAVING
	----------------------------------------------------------------------------------------------------
	Apply рж╣рзЯ			| Raw rows ржПрж░ ржЙржкрж░					| Aggregated (GROUPed) rows ржПрж░ ржЙржкрж░
	Aggregate functions	| тЭМ Use ржХрж░рж╛ ржпрж╛рзЯ ржирж╛				| тЬЕ Use ржХрж░рж╛ ржпрж╛рзЯ
	Execution Order		| Before GROUP BY					| After GROUP BY
	Purpose				| Filter raw data before grouping	| Filter summary data after grouping
</pre>
ЁЯСЙ Example: 
<pre>
-- WHERE filters before grouping
SELECT Country, COUNT(*) AS Total
FROM Customer
WHERE Country IS NOT NULL
GROUP BY Country
HAVING COUNT(*) > 10;   -- HAVING filters group result
</pre>

ЁЯФ╖ <b>HAVING with COUNT </b> <br> 
ЁЯСЙ Example:  List the number of customers in each country. Only include countries with more than 10 customers. 
<pre>SELECT Country, COUNT(Id) 'Total Customer'
		FROM Customer
		GROUP BY Country 
		HAVING COUNT(Id) > 10    </pre>		
ЁЯФ╖ <b>HAVING and ORDER BY </b>  <br> 
ЁЯСЙ Example: List the number of customers in each country, except the USA, sorted high to low. Only include countries with 9 or more customers. 
<pre>SELECT Country, COUNT(Id)'Total Customers'
		FROM Customer 
		WHERE Country <> 'USA'
		GROUP BY Country
		HAVING COUNT(Id) > 9 
		ORDER BY COUNT(Id) DESC   </pre>		
ЁЯФ╖<b>HAVING with AVG BETWEEN </b> <br> 
ЁЯСЙ Example: List customer with average orders between $1000 and $1200. 
<pre>SELECT C.FirstName, C.LastName, CONVERT(DECIMAL(10,2), AVG(O.TotalAmount))'Average Order'
		FROM [Order] O
		INNER JOIN Customer C ON O.CustomerId=C.Id
		GROUP BY C.FirstName, C.LastName
		HAVING AVG(O.TotalAmount) BETWEEN 1000 AND 1200    </pre>		 







