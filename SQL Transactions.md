## SQL Transactions 

тЬЕ <b>SQL Transactions  ржХрзА? </b> <br> 

<p>Transaction рж╣рж▓рзЛ ржПржХрж╛ржзрж┐ржХ SQL operation-ржПрж░ ржПржХржЯрж┐ рж╕рзЗржЯ, ржпрзЗржЧрзБрж▓рзЛ рж╕ржмржЧрзБрж▓рзЛ ржПржХрж╕рж╛ржерзЗ рж╕ржлрж▓ (commit) рж╣ржмрзЗ ржмрж╛ ржПржХрж╕рж╛ржерзЗ ржмрзНржпрж░рзНрже (rollback) рж╣ржмрзЗред ржПржХрзЗ ржмрж▓рзЗ тАФ "All or Nothing" ржЗржнрзЗржирзНржЯред тАЬрж╕ржм ржХрж╛ржЬ рж╣ржмрзЗ ржПржХрж╕рж╛ржерзЗ, ржирж╛ рж╣рж▓рзЗ ржХрж┐ржЫрзБржЗ рж╣ржмрзЗ ржирж╛редтАЭ
ржЕрж░рзНржерж╛рзО, ржХрзЛржирзЛ ржХрж┐ржЫрзБ рж╕ржлрж▓ ржЖрж░ ржХрзЛржирзЛ ржХрж┐ржЫрзБ ржмрзНржпрж░рзНрже тАФ ржПржоржиржЯрж┐ рж╣рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред Transaction рж╢рзБрж░рзБ рж╣рзЯ BEGIN TRAN ржжрж┐рзЯрзЗ ржПржмржВ рж╢рзЗрж╖ рж╣рзЯ COMMIT TRAN ржжрж┐рзЯрзЗред </p>

ЁЯОп <b>ржЙржжрзНржжрзЗрж╢рзНржп (Why Transactions are used): </b> <br> 
<p>Transactions ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржорзВрж▓ ржЙржжрзНржжрзЗрж╢рзНржп рж╣ржЪрзНржЫрзЗ ржбрзЗржЯрж╛рж░ рж╕ржарж┐ржХрждрж╛ (data integrity) ржПржмржВ consistency рж░ржХрзНрж╖рж╛ ржХрж░рж╛ред</p> <br> 
ЁЯФ╕ ржЙржжрж╛рж╣рж░ржг: 
ржзрж░рзЛ, рждрзБржорж┐ ржПржХржЯрж┐ Bank Transfer System ржмрж╛ржирж╛ржЪрзНржЫрзЛ тАФ <br> 
ЁЯТ░ A тЖТ B рждрзЗ ржЯрж╛ржХрж╛ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ рж╣ржЪрзНржЫрзЗ. ржПрж░ ржЬржирзНржп ржжрзБржЗржЯрж╛ query ржЪрж▓ржмрзЗ: <br> 
1я╕ПтГг A-ржПрж░ account ржерзЗржХрзЗ ржЯрж╛ржХрж╛ ржХржорж╛ржирзЛ <br> 
2я╕ПтГг B-ржПрж░ account-ржП ржЯрж╛ржХрж╛ ржпрзЛржЧ ржХрж░рж╛ <br> 
<pre>
UPDATE Accounts SET Balance = Balance - 500 WHERE AccountNo = 'A';
UPDATE Accounts SET Balance = Balance + 500 WHERE AccountNo = 'B';
</pre>
ЁЯСЙ ржПржЦржи ржпржжрж┐ ржорж╛ржЭржЦрж╛ржирзЗ server crash рж╣рзЯ ржмрж╛ ржжрзНржмрж┐рждрзАрзЯ query fail ржХрж░рзЗ тАФ рждрж╛рж╣рж▓рзЗ ржХрзА рж╣ржмрзЗ? 
<p>
тЮбя╕П A-ржПрж░ ржЯрж╛ржХрж╛ ржХржорзЗ ржпрж╛ржмрзЗ
тЮбя╕П ржХрж┐ржирзНрждрзБ B ржкрж╛ржмрзЗ ржирж╛ тЭМ
тЮбя╕П ржбрзЗржЯрж╛ inconsistent рж╣рзЯрзЗ ржпрж╛ржмрзЗ!
ржПржЗ рж╕ржорж╕рзНржпрж╛ рж░рзЛржз ржХрж░рждрзЗржЗ ржЖржорж░рж╛ Transaction ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ ЁЯТк
</p> 

